//here goes the middleware pseudocode 

//deliverable pseudocode
createDeliverable(deliverable:Deliverable)
    IF addToDeliverableDatabase(deliverable.uniqueID,
                                    deliverable.name,
                                    deliverable.description,
                                    deliverable.dueDate)
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF 
END createDeliverable
//update the deliverable  
updateDeliverable(deliverable:Deliverable)  
    IF updateDeliverableDatabase(deliverable.uniqueID,
                                        deliverable.name,
                                        deliverable.description,
                                        deliverable.dueDate)
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF 
END updateDeliverable

deleteDeliverable(deliverableID:Int) 
    IF deliverableExists(deliverableID)
        Task[] associatedTasks=queryTaskDatabaseWithConnectedDeliverable(deliverableID)
        FOR EACH task IN associatedTasks
            removeAssociatedTasks(associatedTasks.uniqueID)
            removeAssociated(associatedTasks.uniqueID)
        END FOR
        deleteDeliverableFromDatabase(deliverableID) 
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF
END deleteDeliverable 

//save the deliverable 
saveDeliverable(deliverable:Deliverable, associatedTasks:INT[], associatedRequirements:Int[] ) 
    IF deliverableExists(deliverable.uniqueID) 
        IF updateDeliverable(deliverable) 
            updateAssociatedTasks(deliverable.uniqueID, associatedTasks) 
            updateAssociatedRequirements(deliverable.uniqueID, associatedRequirements) 
        ELSE
            RETURN displayUpdateFailed()
        END IF
    ELSE 
        IF createDeliverable(deliverable) EQUALS operationFailed
            RETURN displayAddFailed()
        ELSE 
            addAssociatedTasks(deliverable.uniqueID, associatedTasks) 
            addAssociatedRequirements(deliverable.uniqueID, associatedRequirements) 
        END IF        
    END IF 
    RETURN deliverableSaved 
END saveDeliverable 


updateAssociatedTasks(deliverableID:INT, associatedTasks:INT[]) 
    get All Tasks Connected To Deliverable
    FOR EACH task IN tasks
        removeAssociatedTasks(task.uniqueID) 
    END FOR
    addAssociatedTasks(deliverableID, associatedTasks) 
END updateAssociatedTasks

updateAssociatedRequirements(deliverableID:INT, associatedRequirements:INT[]) 
    get All Requirements Connected To Deliverable
    FOR EACH requirement IN requirements
        removeAssociatedRequirements(requirement.uniqueID) 
    END FOR
    addAssociatedRequirements(deliverableID, associatedTasks) 
END updateAssociatedRequirements

addAssociatedTasks(deliverableID:INT, associatedTasks:INT[]) 
    FOR EACH task IN associatedTasks
        task.deliverableID=deliverableID
        IF updateTask(task) EQUALS operationFailed
            RETURN displayUpdateFailed()
        END IF
    END FOR
END addAssociatedTasks

addAssociatedRequirements(deliverableID:INT, associatedRequirements:INT[]) 
    FOR EACH requirement IN associatedRequirements
        requirement.deliverableID=deliverableID
        IF updateRequirement(requirement) EQUALS operationFailed
            RETURN displayUpdateFailed()
        END IF
    END FOR
END addAssociatedRequirements

//task pseudocode
createTask(deliverable:Task)
    IF addToTaskDatabase(task.uniqueID,
                                task.name,
                                task.description,
                                task.expectedStartDate,
                                task.expectedEndDate,
                                task.expectedDuration,
                                task.expectedEffort,
                                task.actualStartDate,
                                task.actualEndDate,
                                task.actualDuration,
                                task.effortCompleted,
                                task.actualEffort,
                                task.percentComplete,
                                task.deliverableID,
                                task.taskType,
                                task.parentID)
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF 
END createTask

saveTask(task:Task, associatedIssues:INT[],associatedResources:INT[], predecessorsTasks:INT[],successorsTasks:INT[]) 
    IF taskExists(task.uniqueID) 
        IF updateTask(task) 
            updateAssociatedIssues(task.uniqueID, associatedIssues) 
            updateAssociatedResources(task.uniqueID, associatedResources) 
            updatePredecessorsTasks(task.uniqueID, predecessorsTasks) 
            updateSuccessorsTasks(task.uniqueID, successorsTasks) 
        ELSE
            RETURN displayUpdateFailed()
        END IF
    ELSE 
        IF createTask(task) EQUALS operationFailed
            RETURN displayAddFailed()
        ELSE 
            addAssociatedIssues(task.uniqueID, associatedIssues) 
            addAssociatedResources(task.uniqueID, associatedResources) 
            addPredecessorsTasks(task.uniqueID, predecessorsTasks) 
            addSuccessorsTasks(task.uniqueID, successorsTasks) 

        END IF        
    END IF 
    RETURN taskSaved 
END saveTask 
updateTask(task:Task)  

    IF updateTaskDatabase(task.uniqueID,
                                task.name,
                                task.description,
                                task.expectedStartDate,
                                task.expectedEndDate,
                                task.expectedDuration,
                                task.expectedEffort,
                                task.actualStartDate,
                                task.actualEndDate,
                                task.actualDuration,
                                task.effortCompleted,
                                task.actualEffort,
                                task.percentComplete,
                                task.deliverableID,
                                task.taskType,
                                task.parentID)
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF 
END updateTask
deleteTask(taskID:Int) 
    IF taskExists(taskID)
        deleteTaskFromDatabase(taskID) 
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF
END deleteTask
addAssociatedIssues(taskID:INT, associatedIssues:INT[]) 
    FOR EACH issue IN associatedIssues
        IF createTaskIssueRealtion(issue,taskID) EQUALS operationFailed
            RETURN displayUpdateFailed()
        END IF
    END FOR
END addAssociatedIssues
addAssociatedResources(taskID:INT, associatedResources:INT[]) 
    FOR EACH resource IN associatedResources
        IF createTaskResourceRealtion(resource,taskID) EQUALS operationFailed
            RETURN displayUpdateFailed()
        END IF
    END FOR
END addAssociatedResources
addPredecessorsTasks(taskID:INT, predecessorsTasks:INT[]) 
    FOR EACH predecessorTask IN predecessorsTasks
        IF createTaskPredecessor(issue,taskID) EQUALS operationFailed
            RETURN displayUpdateFailed()
        END IF
    END FOR
END addPredecessorsTasks

addSuccessorsTasks(taskID:INT, successorsTasks:INT[]) 
    FOR EACH successorTask IN successorsTasks
        IF createTaskPredecessor(issue,taskID) EQUALS operationFailed
            RETURN displayUpdateFailed()
        END IF
    END FOR
END addSuccessorsTasks

updateAssociatedIssues(taskID:INT, associatedIssues:INT[])
    deleteTaskIssuesRelationsFromDatabase(taskID)
    addAssociatedIssues(taskID, associatedIssues) 
END updateAssociatedIssues 
updateAssociatedResources(taskID:INT, associatedResources:INT[]) 
    deleteTaskResourcesRelationsFromDatabase(taskID)
    addAssociatedResources(taskID, associatedResources) 
END updateAssociatedResources

updatePredecessorsTasks(taskID:INT, predecessorsTasks:INT[]) 
    deletePredecessorsTasksFromDatabase(taskID)
    addPredecessorsTasks(taskID, predecessorsTasks) 
END updatePredecessorsTasks
updateSuccessorsTasks(taskID:INT, successorsTasks:INT[]) 
    deleteSuccessorsTasksFromDatabase(taskID)
    addAssociatedResources(taskID, successorsTasks) 
END updateSuccessorsTasks

//tasks issues relation
createTaskIssueRealtion(issueID:INT,taskID:INT)
    IF addToIssuesRelationsDatabase(issueID,taskID)
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF 
END addTaskIssueRealtion


//tasks resources relation
createTaskResourceRealtion(resourceID:INT,taskID:INT)
    IF addToResourcesRelationsDatabase(resourceID,taskID)
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF 
END addTaskResourceRealtion

//tasks predecessors relation
createTaskPredecessor(taskID:INT,taskPredecessorID:INT)

    IF addToTaskPredecessorsDatabase(taskID,taskPredecessorID)
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF 
END createTaskPredecessor
createTaskSuccessor(taskID:INT,taskSuccessorID:INT)

    IF addToTaskSuccessorsDatabase(taskID,taskSuccessorID)
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF 
END createTaskSuccessor

//default values lists
createPriorityDefault(priorityDefault:PriorityDefault)
    IF addToPriorityDefaultDatabase(priorityDefault.uniqueID, priorityDefault.name)
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF 
END createPriorityDefault
deletePriorityDefault(priorityDefaultID:Int) 
    IF priorityDefaultExists(priorityDefaultID)
        deletePriorityDefaultFromDatabase(priorityDefaultID) 
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF
END deletePriorityDefault
updatePriorityDefault(priorityDefault:PriorityDefault)  

    IF updateTaskDatabase(priorityDefault.uniqueID,
                                priorityDefault.name)
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF 
END updatePriorityDefault
savePriorityDefault(priorityDefault:PriorityDefault)  
    IF priorityDefaultExists(priorityDefault.uniqueID) 
        IF updatePriorityDefault(priorityDefault) EQUALS operationFailed
            RETURN displayUpdateFailed()
        END IF
    ELSE 
        IF createPriorityDefault(priorityDefault) EQUALS operationFailed
            RETURN displayAddFailed()
        END IF        
    END IF 
    RETURN priorityDefaultSaved
END savePriorityDefault 

createSeverityDefault(severityDefault:SeverityDefault)

    IF addToSeverityDefaultDatabase(severityDefault.uniqueID, severityDefault.name)
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF 
END createSeverityDefault
deleteSeverityDefault(severityDefaultID:Int) 
    IF severityDefaultExists(severityDefaultID)
        deleteSeverityDefaultFromDatabase(severityDefaultID) 
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF
END deleteSeverityDefault
updateSeverityDefault(severityDefault:SeverityDefault)  
    IF updateTaskDatabase(severityDefault.uniqueID,
                                severityDefault.name)
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF 
END updateSeverityDefault
saveSeverityDefault(severityDefault:SeverityDefault)  
    IF severityDefaultExists(severityDefault.uniqueID) 
        IF updateSeverityDefault(severityDefault) EQUALS operationFailed
            RETURN displayUpdateFailed()
        END IF
    ELSE 
        IF createSeverityDefault(severityDefault) EQUALS operationFailed
            RETURN displayAddFailed()
        END IF        
    END IF 
    RETURN severityDefaultSaved
END saveSeverityDefault 
createImpactDefault(impactDefault:ImpactDefault)
    IF addToImpactDefaultDatabase(impactDefault.uniqueID, impactDefault.name)
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF 
END createImpactDefault
deleteImpactDefault(impactDefaultID:Int) 
    IF impactDefaultExists(impactDefaultID)
        deleteImpactDefaultFromDatabase(impactDefaultID) 
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF
END deleteImpactDefault
updateImpactDefault(impactDefault:ImpactDefault)  

    IF updateTaskDatabase(impactDefault.uniqueID,
                                impactDefault.name)
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF 
END updateImpactDefault
saveImpactDefault(impactDefault:ImpactDefault)  
    IF impactDefaultExists(impactDefault.uniqueID) 
        IF updateImpactDefault(impactDefault) EQUALS operationFailed
            RETURN displayUpdateFailed()
        END IF
    ELSE 
        IF createImpactDefault(impactDefault) EQUALS operationFailed
            RETURN displayAddFailed()
        END IF        
    END IF 
    RETURN impactDefaultSaved
END saveImpactDefault 

createStatusDefault(statusDefault:StatusDefault)
    IF addToStatusDefaultDatabase(statusDefault.uniqueID, statusDefault.name)
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF 
END createStatusDefault
deleteStatusDefault(statusDefaultID:Int) 
    IF statusDefaultExists(statusDefaultID)
        deleteStatusDefaultFromDatabase(statusDefaultID) 
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF
END deleteStatusDefault
updateStatusDefault(statusDefault:StatusDefault)  
    IF updateTaskDatabase(statusDefault.uniqueID,
                                statusDefault.name)
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF 
END updateStatusDefault
saveStatusDefault(statusDefault:StatusDefault)  
    IF statusDefaultExists(statusDefault.uniqueID) 
        IF updateStatusDefault(statusDefault) EQUALS operationFailed

            RETURN displayUpdateFailed()
        END IF
    ELSE 
        IF createStatusDefault(statusDefault) EQUALS operationFailed
            RETURN displayAddFailed()
        END IF        
    END IF 
    RETURN statusDefaultSaved
END saveStatusDefault 


createCategoryDefault(categoryDefault:CategoryDefault)
    IF addToCategoryDefaultDatabase(categoryDefault.uniqueID, categoryDefault.name)
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF 
END createCategoryDefault
deleteCategoryDefault(categoryDefaultID:Int) 
    IF categoryDefaultExists(categoryDefaultID)
        deleteCategoryDefaultFromDatabase(categoryDefaultID) 
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF
END deleteCategoryDefault
updateCategoryDefault(categoryDefault:CategoryDefault)  

    IF updateTaskDatabase(categoryDefault.uniqueID,
                                categoryDefault.name)
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF 
END updateCategoryDefault
saveCategoryDefault(categoryDefault:CategoryDefault)  
    IF categoryDefaultExists(categoryDefault.uniqueID) 
        IF updateCategoryDefault(categoryDefault) EQUALS operationFailed
            RETURN displayUpdateFailed()
        END IF
    ELSE 
        IF createCategoryDefault(categoryDefault) EQUALS operationFailed
            RETURN displayAddFailed()
        END IF        
    END IF 
    RETURN categoryDefaultSaved
END saveCategoryDefault 

//requirement pseudocode


//save the requirement 
saveRequirement(requirement:Requirement) 
    IF requirementExists(requirement.uniqueID) 
        IF updateRequirement(requirement) EQUALS operationFailed
            RETURN displayUpdateFailed()
        END IF
    ELSE 
        IF createRequirement(requirement) EQUALS operationFailed
            RETURN displayAddFailed()

        END IF        
    END IF 
    RETURN requirementSaved 
END saveRequirement 
createRequirement(requirement:Requirement)

    IF addToRequirementDatabase(requirement.uniqueID,
                                    requirement.name,
                                    requirement.deliverableID)
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF 
END createRequirement

deleteRequirement(requirementID:INT)
    IF requirementExists(requirementID)
        deleteRequirementFromDatabase(requirementID) 
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF
END deleteRequirement
updateRequirement(requirement:Requirement)  
    IF updateRequirementDatabase(requirement.uniqueID,
                                    requirement.name,
                                    requirement.deliverableID)
        RETURN operationCompletedSuccessfully
    ELSE
        RETURN operationFailed
    END IF 
END updateRequirement






