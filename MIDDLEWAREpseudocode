//here goes the middleware pseudocode 
//requirement pseudocode
requirementExists(requirementID:Int)
    IF queryRequirementDatabase(requirementID)
        RETURN true
    ELSE
        RETURN false
    END IF 
END requirementExists
//save the requirement 
saveRequirement(requirement:Requirement) 
    IF requirementExists(requirement.uniqueID) 
        IF NOT updateRequirement(requirement) 
            //displayUpdateFailed exist in gui
            RETURN displayUpdateFailed("ErrorSQL", requirement)
        END IF
    ELSE 
        IF NOT createRequirement(requirement) 
            //displayAddFailed exist in gui
            RETURN displayAddFailed("ErrorSQL", requirement)

        END IF        
    END IF 
    RETURN requirementSaved 
END saveRequirement 
createRequirement(requirement:Requirement)
    //database attributes validations will be verified in gui and database part of the program
    IF queryAddToRequirementDatabase(requirement.uniqueID,
                                    requirement.name,
                                    requirement.deliverableID)
        RETURN true
    ELSE
        RETURN false
    END IF 
END createRequirement

deleteRequirement(requirementID:INT)
    IF requirementExists(requirementID)
        Requirement requirement=queryRequirementDatabase(requirementID)
        Deliverable[] otherRequirementsWithSameDeliverable=queryRequirementDatabaseWithConnectedDeliverable(requirement.deliverableID)
        IF otherRequirementsWithSameDeliverable.length==0
            deleteDeliverable(requirement.deliverableID)
        END IF
        queryDeleteRequirementFromDatabase(requirementID) 
        RETURN true
    ELSE
        RETURN false
    END IF
END deleteRequirement
//update Requirement  
updateRequirement(requirement:Requirement)  
    //database attributes validations will be verified in gui and database part of the program
    IF queryUpdateRequirementDatabase(requirement.uniqueID,
                                    requirement.name,
                                    requirement.deliverableID)
        RETURN true
    ELSE
        RETURN false
    END IF 
END updateRequirement

//deliverable pseudocode
deliverableExists(deliverableID:Int)
    IF queryDeliverableDatabase(deliverableID)
        RETURN true
    ELSE
        RETURN false
    END IF 
END deliverableExists

createDeliverable(deliverable:Deliverable)
    //database attributes validations will be verified in gui and database part of the program
    IF queryAddToDeliverableDatabase(deliverable.uniqueID,
                                    deliverable.name,
                                    deliverable.description,
                                    deliverable.dueDate)
        RETURN true
    ELSE
        RETURN false
    END IF 
END createDeliverable
//update the deliverable  
updateDeliverable(deliverable:Deliverable)  
    //database attributes validations will be verified in gui and database part of the program
    IF queryUpdateDeliverableDatabase(deliverable.uniqueID,
                                        deliverable.name,
                                        deliverable.description,
                                        deliverable.dueDate)
        RETURN true
    ELSE
        RETURN false
    END IF 
END updateDeliverable

deleteDeliverable(deliverableID:Int) 
    IF deliverableExists(deliverableID)
        Task[] associatedTasks=queryTaskDatabaseWithConnectedDeliverable(deliverableID)
        FOR EACH task IN associatedTasks
            removeAssociatedTasks(associatedTasks.uniqueID)
            removeAssociated(associatedTasks.uniqueID)
        END FOR
        queryDeleteDeliverableFromDatabase(deliverableID) 
        RETURN true
    ELSE
        RETURN false
    END IF
END deleteDeliverable 

//save the deliverable 
saveDeliverable(deliverable:Deliverable, associatedTasks:INT[], associatedRequirements:Int[] ) 
    IF deliverableExists(deliverable.uniqueID) 
        IF updateDeliverable(deliverable) 
            updateAssociatedTasks(deliverable.uniqueID, associatedTasks) 
            updateAssociatedRequirements(deliverable.uniqueID, associatedRequirements) 
        ELSE
            //displayUpdateFailed exist in gui
            RETURN displayUpdateFailed("ErrorSQL", deliverable)
        END IF
    ELSE 
        IF NOT createDeliverable(deliverable) 
            //displayAddFailed exist in gui
            RETURN displayAddFailed("ErrorSQL", deliverable)
        ELSE 
            addAssociatedTasks(deliverable.uniqueID, associatedTasks) 
            addAssociatedRequirements(deliverable.uniqueID, associatedRequirements) 
        END IF        
    END IF 
    RETURN deliverableSaved 
END saveDeliverable 

//get one deliverable
getDeliverable(deliverableID:Int)
    Deliverable deliverable = queryDeliverableDatabase(deliverableID)
    RETURN deliverable
END getDeliverable
//get one deliverable
getAllDeliverable()
    RETURN queryAllDeliverableDatabase()
END getDeliverable

updateAssociatedTasks(deliverableID:INT, associatedTasks:INT[]) 
    Task[] tasks=queryTaskDatabaseWithConnectedDeliverable(deliverableID)
    FOR EACH task IN tasks
        removeAssociatedTasks(task.uniqueID) 
    END FOR
    addAssociatedTasks(deliverableID, associatedTasks) 
END updateAssociatedTasks

updateAssociatedRequirements(deliverableID:INT, associatedRequirements:INT[]) 
    Requirements[] requirements=queryRequirementDatabaseWithConnectedDeliverable(deliverableID)
    FOR EACH requirement IN requirements
        removeAssociatedRequirements(requirement.uniqueID) 
    END FOR
    addAssociatedRequirements(deliverableID, associatedTasks) 
END updateAssociatedRequirements

removeAssociatedTasks(taskID:INT) 
    Task task=queryTaskDatabase(taskID)
    task.deliverableID=NULL
     IF NOT updateTask(task)
        //displayUpdateFailed exist in gui
        RETURN displayUpdateFailed("ErrorSQL", temp)
    END IF    
END removeAssociatedTasks
removeAssociatedRequirements(requirementID:INT) 
    Requirement requirement=queryTaskDatabase(requirementID)
    requirement.deliverableID=NULL
     IF NOT updateRequirement(requirement)
        //displayUpdateFailed exist in gui
        RETURN displayUpdateFailed("ErrorSQL", temp)
    END IF    
END removeAssociatedTasks
addAssociatedTasks(deliverableID:INT, associatedTasks:INT[]) 
    FOR EACH task IN associatedTasks
        Task temp = queryTaskDatabase(task)
        temp.deliverableID=deliverableID
        IF NOT updateTask(temp)
            //displayUpdateFailed exist in gui
            RETURN displayUpdateFailed("ErrorSQL", temp)
        END IF
    END FOR
END addAssociatedTasks

addAssociatedRequirements(deliverableID:INT, associatedRequirements:INT[]) 
    FOR EACH requirment IN associatedRequirements
        Requirement temp = queryRequirementDatabase(requirment)
        temp.deliverableID=deliverableID
        IF NOT updateRequirement(temp)
            //displayUpdateFailed exist in gui
            RETURN displayUpdateFailed("ErrorSQL", temp)
        END IF
    END FOR
END addAssociatedRequirements

//task pseudocode
taskExists(taskID:Int)
    IF queryTaskDatabase(taskID)
        RETURN true
    ELSE
        RETURN false
    END IF 
END taskExists

//create task  
createTask(deliverable:Task)
    //database attributes validations will be verified in gui and database part of the program
    IF queryAddToTaskDatabase(task.uniqueID,
                                task.name,
                                task.description,
                                task.expectedStartDate,
                                task.expectedEndDate,
                                task.expectedDuration,
                                task.expectedEffort,
                                task.actualStartDate,
                                task.actualEndDate,
                                task.actualDuration,
                                task.effortCompleted,
                                task.actualEffort,
                                task.percentComplete,
                                task.deliverableID,
                                task.taskType,
                                task.parentID)
        RETURN true
    ELSE
        RETURN false
    END IF 
END createTask

//save task  
saveTask(task:Task, associatedIssues:INT[],associatedResources:INT[], predecessorsTasks:INT[],successorsTasks:INT[]) 
    IF taskExists(task.uniqueID) 
        IF updateTask(task) 
            updateAssociatedIssues(task.uniqueID, associatedIssues) 
            updateAssociatedResources(task.uniqueID, associatedResources) 
            updatePredecessorsTasks(task.uniqueID, predecessorsTasks) 
            updateSuccessorsTasks(task.uniqueID, successorsTasks) 
        ELSE
            //displayUpdateFailed exist in gui
            RETURN displayUpdateFailed("ErrorSQL", task)
        END IF
    ELSE 
        IF NOT createTask(task) 
            //displayAddFailed exist in gui
            RETURN displayAddFailed("ErrorSQL", task)
        ELSE 
            addAssociatedIssues(task.uniqueID, associatedIssues) 
            addAssociatedResources(task.uniqueID, associatedResources) 
            addPredecessorsTasks(task.uniqueID, predecessorsTasks) 
            addSuccessorsTasks(task.uniqueID, successorsTasks) 

        END IF        
    END IF 
    RETURN taskSaved 
END saveTask 
//update task  
updateTask(task:Task)  
    //database attributes validations will be verified in gui and database part of the program
    IF queryUpdateTaskDatabase(task.uniqueID,
                                task.name,
                                task.description,
                                task.expectedStartDate,
                                task.expectedEndDate,
                                task.expectedDuration,
                                task.expectedEffort,
                                task.actualStartDate,
                                task.actualEndDate,
                                task.actualDuration,
                                task.effortCompleted,
                                task.actualEffort,
                                task.percentComplete,
                                task.deliverableID,
                                task.taskType,
                                task.parentID)
        RETURN true
    ELSE
        RETURN false
    END IF 
END updateTask
//delete task 
deleteTask(taskID:Int) 
    IF taskExists(taskID)
        queryDeleteTaskFromDatabase(taskID) 
        RETURN true
    ELSE
        RETURN false
    END IF
END deleteTask

//add those 
addAssociatedIssues(taskID:INT, associatedIssues:INT[]) 
addAssociatedResources(taskID:INT, associatedResources:INT[]) 
addPredecessorsTasks(taskID:INT, predecessorsTasks:INT[]) 
addSuccessorsTasks(taskID:INT, successorsTasks:INT[]) 
updateAssociatedIssues(taskID:INT, associatedIssues:INT[]) 
updateAssociatedResources(taskID:INT, associatedResources:INT[]) 
updatePredecessorsTasks(taskID:INT, predecessorsTasks:INT[]) 
updateSuccessorsTasks(taskID:INT, successorsTasks:INT[]) 


//default list
priorityDefaultExists(priorityDefaultID:Int)
    IF queryPriorityDefaultDatabase(priorityDefaultID)
        RETURN true
    ELSE
        RETURN false
    END IF 
END priorityDefaultExists
createPriorityDefault(priorityDefault:PriorityDefault)
    //database attributes validations will be verified in gui and database part of the program
    IF queryAddToPriorityDefaultDatabase(priorityDefault.uniqueID, priorityDefault.name)
        RETURN true
    ELSE
        RETURN false
    END IF 
END createPriorityDefault
deletePriorityDefault(priorityDefaultID:Int) 
    IF priorityDefaultExists(priorityDefaultID)
        queryDeletePriorityDefaultFromDatabase(priorityDefaultID) 
        RETURN true
    ELSE
        RETURN false
    END IF
END deletePriorityDefault
updatePriorityDefault(priorityDefault:PriorityDefault)  
    //database attributes validations will be verified in gui and database part of the program
    IF queryUpdateTaskDatabase(priorityDefault.uniqueID,
                                priorityDefault.name)
        RETURN true
    ELSE
        RETURN false
    END IF 
END updatePriorityDefault
savePriorityDefault(priorityDefault:PriorityDefault)  
    IF priorityDefaultExists(priorityDefault.uniqueID) 
        IF NOT updatePriorityDefault(priorityDefault) 
            //displayUpdateFailed exist in gui
            RETURN displayUpdateFailed("ErrorSQL", task)
        END IF
    ELSE 
        IF NOT createPriorityDefault(priorityDefault) 
            //displayAddFailed exist in gui
            RETURN displayAddFailed("ErrorSQL", priorityDefault)
        END IF        
    END IF 
    RETURN priorityDefaultSaved
END savePriorityDefault 